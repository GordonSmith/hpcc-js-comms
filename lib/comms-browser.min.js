!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.HPCCComms=e.HPCCComms||{})}(this,function(e){"use strict";function t(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function n(){}function r(e,t){var r=new n;if(e instanceof n)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var o,i=-1,u=e.length;if(null==t)for(;++i<u;)r.set(i,e[i]);else for(;++i<u;)r.set(t(o=e[i],i,e),o)}else if(e)for(var s in e)r.set(s,e[s]);return r}function o(){}function i(e,t){var n=new o;if(e instanceof o)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}function u(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new s(r)}function s(e){this._=e}function a(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function c(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function p(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=N,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function l(e){return function(t,n){e(null==t?n:null)}}function f(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function h(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function d(e,t){var n=h(e);return function(r,o){return t(n(r),o,e)}}function g(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function b(e,t){return function(n){return e(n.responseText,t)}}function y(e,t){function n(){this.constructor=e}z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function m(e,t,n){var r=e.toString();("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>r.length)&&(n=r.length),n-=t.length;var o=r.lastIndexOf(t,n);return o!==-1&&o===n}function v(t){var n=e.createTransport;return e.createTransport=t,n}function w(e){var t=new ie;return t.parse(e),t.root}function _(e){var t=new pe;return t.parse(e),t.schema}function C(e){return"[object Array]"===Object.prototype.toString.call(e)}function S(e,t){for(;e.length<t;)e="0"+e;return e}function P(e,t){if(0===t.length)return e;for(var n=0;n<t.length;++n){e=(e<<5)-e+t.charCodeAt(n),e|=0}return e<0?e*-2:e}function W(e,t,n){return Object.keys(t).sort().reduce(function(e,r){return O(e,t[r],r,n)},e)}function O(e,t,n,r){var o=P(P(P(e,n),j(t)),typeof t);return null===t?P(o,"null"):void 0===t?P(o,"undefined"):"object"==typeof t?r.indexOf(t)!==-1?P(o,"[Circular]"+n):(r.push(t),W(o,t,r)):P(o,t.toString())}function j(e){return Object.prototype.toString.call(e)}function U(e){return S(O(0,e,"",[]).toString(16),8)}function R(e,t){if(void 0!==e&&void 0!==t){for(var n=0,r=e.split(".");n<r.length;n++){var o=r[n];if(!t.hasOwnProperty(o))return;t=t[o]}return t}}function T(e,t){return void 0!==R(e,t)}function D(e,t,n){n=n||[],n.push(e),t(e.name,e.attributes,e.children,n),e.children.forEach(function(e){D(e,t,n)}),n.pop()}function E(e){var t={};return e.forEach(function(e){"att"===e.name&&(t[e.attributes.name]=e.attributes.value)}),t}function k(e,t){var n=new Re(e),r=[n];D(t,function(e,t,o,i){var u=r[r.length-1];switch(e){case"graph":break;case"node":if(o.length&&o[0].children.length&&"graph"===o[0].children[0].name){var s=new je(u,"graph"+t.id,E(o));n.allSubgraphs[s.id]=s,r.push(s)}else{var a=new Ue(u,t.id,t.label,E(o));n.allVertices[a.id]=a}break;case"edge":var c=new Te(u,t.id,t.source,t.target,E(o));n.allEdges[c.id]=c}});for(var o in n.allEdges)if(n.allEdges.hasOwnProperty(o)){var i=n.allEdges[o];try{i.source=n.allVertices[i.sourceID],i.target=n.allVertices[i.targetID],i.source.outEdges.push(i),i.target.inEdges.push(i)}catch(e){}}return n}function A(e){if(!e)return 0;if(!isNaN(e))return parseFloat(e);var t=e.indexOf("ns");if(t!==-1)return parseFloat(e.substr(0,t))/1e9;var n=e.indexOf("ms");if(n!==-1)return parseFloat(e.substr(0,n))/1e3;var r=e.indexOf("s");if(r!==-1&&e.indexOf("days")===-1)return parseFloat(e.substr(0,r));for(var o=e.split(" days "),i=parseFloat(o.length>1?o[0]:0),u=o.length>1?o[1]:o[0],s=0,a=u.split(":").reverse(),c=0;c<a.length;++c)s+=parseFloat(a[c])*Math.pow(60,c);return 24*i*60*60+s}var x="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},L=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,n){!function(n,r){e.exports=function(){function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function r(e){X=e}function o(e){q=e}function i(){return void 0!==H?function(){H(s)}:u()}function u(){var e=setTimeout;return function(){return e(s,1)}}function s(){for(var e=0;e<M;e+=2){(0,Y[e])(Y[e+1]),Y[e]=void 0,Y[e+1]=void 0}M=0}function a(e,t){var n=arguments,r=this,o=new this.constructor(p);void 0===o[K]&&R(o);var i=r._state;return i?function(){var e=n[i-1];q(function(){return O(i,o,e,r._result)})}():C(r,o,e,t),o}function c(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(p);return m(n,e),n}function p(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function h(e){try{return e.then}catch(e){return re.error=e,re}}function d(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function g(e,t,n){q(function(e){var r=!1,o=d(n,t,function(n){r||(r=!0,t!==n?m(e,n):w(e,n))},function(t){r||(r=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,_(e,o))},e)}function b(e,t){t._state===te?w(e,t._result):t._state===ne?_(e,t._result):C(t,void 0,function(t){return m(e,t)},function(t){return _(e,t)})}function y(e,t,r){t.constructor===e.constructor&&r===a&&t.constructor.resolve===c?b(e,t):r===re?(_(e,re.error),re.error=null):void 0===r?w(e,t):n(r)?g(e,t,r):w(e,t)}function m(t,n){t===n?_(t,l()):e(n)?y(t,n,h(n)):w(t,n)}function v(e){e._onerror&&e._onerror(e._result),S(e)}function w(e,t){e._state===ee&&(e._result=t,e._state=te,0!==e._subscribers.length&&q(S,e))}function _(e,t){e._state===ee&&(e._state=ne,e._result=t,q(v,e))}function C(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+te]=n,o[i+ne]=r,0===i&&e._state&&q(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,u=0;u<t.length;u+=3)r=t[u],o=t[u+n],r?O(n,r,o,i):o(i);e._subscribers.length=0}}function P(){this.error=null}function W(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function O(e,t,r,o){var i=n(r),u=void 0,s=void 0,a=void 0,c=void 0;if(i){if(u=W(r,o),u===oe?(c=!0,s=u.error,u.error=null):a=!0,t===u)return void _(t,f())}else u=o,a=!0;t._state!==ee||(i&&a?m(t,u):c?_(t,s):e===te?w(t,u):e===ne&&_(t,u))}function j(e,t){try{t(function(t){m(e,t)},function(t){_(e,t)})}catch(t){_(e,t)}}function U(){return ie++}function R(e){e[K]=ie++,e._state=void 0,e._result=void 0,e._subscribers=[]}function T(e,t){this._instanceConstructor=e,this.promise=new e(p),this.promise[K]||R(this.promise),G(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):_(this.promise,D())}function D(){return new Error("Array Methods must be provided an Array")}function E(e){return new T(this,e).promise}function k(e){var t=this;return new t(G(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function A(e){var t=this,n=new t(p);return _(n,e),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(e){this[K]=U(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&L(),this instanceof N?j(this,e):I())}function V(){var e=void 0;if(void 0!==x)e=x;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=N}var F=void 0;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var G=F,M=0,H=void 0,X=void 0,q=function(e,t){Y[M]=e,Y[M+1]=t,2===(M+=2)&&(X?X(s):Z())},Q="undefined"!=typeof window?window:void 0,z=Q||{},$=z.MutationObserver||z.WebKitMutationObserver,B="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Y=new Array(1e3),Z=void 0;Z=B?function(){return function(){return process.nextTick(s)}}():$?function(){var e=0,t=new $(s),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():J?function(){var e=new MessageChannel;return e.port1.onmessage=s,function(){return e.port2.postMessage(0)}}():void 0===Q&&"function"==typeof t?function(){try{var e=t,n=e("vertx");return H=n.runOnLoop||n.runOnContext,i()}catch(e){return u()}}():u();var K=Math.random().toString(36).substring(16),ee=void 0,te=1,ne=2,re=new P,oe=new P,ie=0;return T.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ee&&n<e;n++)this._eachEntry(t[n],n)},T.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===c){var o=h(e);if(o===a&&e._state!==ee)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===N){var i=new n(p);y(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},T.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ee&&(this._remaining--,e===ne?_(r,n):this._result[t]=n),0===this._remaining&&w(r,this._result)},T.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(te,t,e)},function(e){return n._settledAt(ne,t,e)})},N.all=E,N.race=k,N.resolve=c,N.reject=A,N._setScheduler=r,N._setAsap=o,N._asap=q,N.prototype={constructor:N,then:a,catch:function(e){return this.then(null,e)}},N.polyfill=V,N.Promise=N,N}()}()});L.polyfill();n.prototype=r.prototype={constructor:n,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var I=r.prototype;o.prototype=i.prototype={constructor:o,has:I.has,add:function(e){return e+="",this["$"+e]=e,this},remove:I.remove,clear:I.clear,values:I.keys,size:I.size,empty:I.empty,each:I.each};var N={value:function(){}};s.prototype=u.prototype={constructor:s,on:function(e,t){var n,r=this._,o=a(e+"",r),i=-1,u=o.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<u;)if(n=(e=o[i]).type)r[n]=p(r[n],e.name,t);else if(null==t)for(n in r)r[n]=p(r[n],e.name,null);return this}for(;++i<u;)if((n=(e=o[i]).type)&&(n=c(r[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new s(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,n=r.length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var V=function(e,t){function n(e){var t,n=h.status;if(!n&&f(h)||n>=200&&n<300||304===n){if(s)try{t=s.call(o,h)}catch(e){return void c.call("error",o,e)}else t=h;c.call("load",o,t)}else c.call("error",o,e)}var o,i,s,a,c=u("beforesend","progress","load","error"),p=r(),h=new XMLHttpRequest,d=null,g=null,b=0;if("undefined"==typeof XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(e)||(h=new XDomainRequest),"onload"in h?h.onload=h.onerror=h.ontimeout=n:h.onreadystatechange=function(e){h.readyState>3&&n(e)},h.onprogress=function(e){c.call("progress",o,e)},o={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?p.get(e):(null==t?p.remove(e):p.set(e,t+""),o)},mimeType:function(e){return arguments.length?(i=null==e?null:e+"",o):i},responseType:function(e){return arguments.length?(a=e,o):a},timeout:function(e){return arguments.length?(b=+e,o):b},user:function(e){return arguments.length<1?d:(d=null==e?null:e+"",o)},password:function(e){return arguments.length<1?g:(g=null==e?null:e+"",o)},response:function(e){return s=e,o},get:function(e,t){return o.send("GET",e,t)},post:function(e,t){return o.send("POST",e,t)},send:function(t,n,r){return h.open(t,e,!0,d,g),null==i||p.has("accept")||p.set("accept",i+",*/*"),h.setRequestHeader&&p.each(function(e,t){h.setRequestHeader(t,e)}),null!=i&&h.overrideMimeType&&h.overrideMimeType(i),null!=a&&(h.responseType=a),b>0&&(h.timeout=b),null==r&&"function"==typeof n&&(r=n,n=null),null!=r&&1===r.length&&(r=l(r)),null!=r&&o.on("error",r).on("load",function(e){r(null,e)}),c.call("beforesend",o,h),h.send(null==n?null:n),o},abort:function(){return h.abort(),o},on:function(){var e=c.on.apply(c,arguments);return e===c?o:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return o.get(t)}return o},F=function(e,t){return function(n,r){var o=V(n).mimeType(e).response(t);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return o.get(r)}return o}};F("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),F("application/json",function(e){return JSON.parse(e.responseText)}),F("text/plain",function(e){return e.responseText}),F("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t});var G=function(e){function t(e,t){var r,o,i=n(e,function(e,n){if(r)return r(e,n-1);o=e,r=t?d(e,t):h(e)});return i.columns=o,i}function n(e,t){function n(){if(p>=c)return u;if(o)return o=!1,i;var t,n=p;if(34===e.charCodeAt(n)){for(var r=n;r++<c;)if(34===e.charCodeAt(r)){if(34!==e.charCodeAt(r+1))break;++r}return p=r+2,t=e.charCodeAt(r+1),13===t?(o=!0,10===e.charCodeAt(r+2)&&++p):10===t&&(o=!0),e.slice(n+1,r).replace(/""/g,'"')}for(;p<c;){var s=1;if(10===(t=e.charCodeAt(p++)))o=!0;else if(13===t)o=!0,10===e.charCodeAt(p)&&(++p,++s);else if(t!==a)continue;return e.slice(n,p-s)}return e.slice(n)}for(var r,o,i={},u={},s=[],c=e.length,p=0,l=0;(r=n())!==u;){for(var f=[];r!==i&&r!==u;)f.push(r),r=n();t&&null==(f=t(f,l++))||s.push(f)}return s}function r(t,n){return null==n&&(n=g(t)),[n.map(u).join(e)].concat(t.map(function(t){return n.map(function(e){return u(t[e])}).join(e)})).join("\n")}function o(e){return e.map(i).join("\n")}function i(t){return t.map(u).join(e)}function u(e){return null==e?"":s.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n\r]"),a=e.charCodeAt(0);return{parse:t,parseRows:n,format:r,formatRows:o}},M=G(","),H=M.parse,X=G("\t"),q=X.parse,Q=function(e,t){return function(n,r,o){arguments.length<3&&(o=r,r=null);var i=V(n).mimeType(e);return i.row=function(e){return arguments.length?i.response(b(t,r=e)):r},i.row(r),o?i.get(o):i}};Q("text/csv",H),Q("text/tab-separated-values",q);var z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},B=function(){function e(e){this.opts({baseUrl:e})}return e.prototype.opts=function(e){return 0===arguments.length?this._opts:(this._opts=$({},this._opts,e),this)},e.prototype.serialize=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},e.prototype.deserialize=function(e){return JSON.parse(e)},e.prototype.stripSlashes=function(e){for(;0===e.indexOf("/");)e=e.substring(1);for(;m(e,"/");)e=e.substring(0,e.length-1);return e},e.prototype.joinUrl=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.stripSlashes(this._opts.baseUrl)+"/"+t.map(function(t){return e.stripSlashes(t)}).join("/")},e}(),J=null,Y=null,Z=function(e){function t(t,n,r,o,i){void 0===r&&(r=""),void 0===o&&(o=""),void 0===i&&(i=!0);var u=e.call(this,t)||this;return u.verb=n,u.userID=r,u.password=o,u.rejectUnauthorized=i,u}return y(t,e),t.prototype.nodeRequestSend=function(e,t,n){var r=this;return void 0===n&&(n="json"),new Promise(function(o,i){var u={method:r.verb,uri:r.joinUrl(e),auth:{user:r.userID,pass:r.password,sendImmediately:!0},username:r.userID,password:r.password};switch(r.verb){case"GET":u.uri+="?"+r.serialize(t);break;case"POST":u.headers={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},u.rejectUnauthorized=r.rejectUnauthorized,u.body=r.serialize(t)}J(u,function(e,t,u){e?i(new Error(e)):t&&200===t.statusCode?o("json"===n?r.deserialize(u):u):i(new Error(u))})})},t.prototype.d3Send=function(e,t,n){var r=this;return void 0===n&&(n="json"),new Promise(function(o,i){var u={method:r.verb,uri:r.joinUrl(e),auth:{user:r.userID,pass:r.password,sendImmediately:!0},username:r.userID,password:r.password};switch(r.verb){case"GET":u.uri+="?"+r.serialize(t);break;case"POST":u.headers={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},u.rejectUnauthorized=r.rejectUnauthorized,u.body=r.serialize(t)}var s=Y(u.uri);"POST"===r.verb&&s.header("X-Requested-With","XMLHttpRequest").header("Content-Type","application/x-www-form-urlencoded").header("Origin",null),s.send(r.verb,u.body,function(e,t){e?i(new Error(e)):t&&200===t.status?o("json"===n?r.deserialize(t.responseText):t.responseText):i(new Error(t.responseText))})})},t.prototype.send=function(e,t,n){if(void 0===n&&(n="json"),J)return this.nodeRequestSend(e,t,n);if(Y)return this.d3Send(e,t,n);throw new Error("No transport")},t}(B),K=function(e){function t(t,n,r,o){return void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=!0),e.call(this,t,"GET",n,r,o)||this}return y(t,e),t}(Z),ee=function(e){function t(t,n,r,o){return void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=!0),e.call(this,t,"POST",n,r,o)||this}return y(t,e),t}(Z),te=function(e){function t(t,n){void 0===n&&(n=60);var r=e.call(this,t)||this;return r.timeout=n,r}return y(t,e),t.prototype.send=function(e,t){var n=this;return new Promise(function(r,o){function i(){delete window[s],document.body.removeChild(a)}var u=1e3*n.timeout,s="jsonp_callback_"+Math.round(999999*Math.random());window[s]=function(e){u=0,i(),r(e)};var a=document.createElement("script"),c=n.joinUrl(e);c+=c.indexOf("?")>=0?"&":"?",a.src=c+"jsonp="+s+"&"+n.serialize(t),document.body.appendChild(a);var p=setInterval(function(){u<=0?clearInterval(p):(u-=5e3)<=0&&(clearInterval(p),i(),o(Error("Request timeout:  "+a.src)))},5e3)})},t}(B);e.createTransport=function(e,t){var n=new ee(e);return t&&n.opts(t),n};var ne,re=function(){function e(){this.stack=[]}return e.prototype.push=function(e){return this.stack.push(e),e},e.prototype.pop=function(){return this.stack.pop()},e.prototype.top=function(){return this.stack.length?this.stack[this.stack.length-1]:void 0},e.prototype.depth=function(){return this.stack.length},e}(),oe=function(){function e(e){this.name="",this.attributes={},this.children=[],this.content="",this.name=e.name}return e.prototype.appendAttribute=function(e,t){this.attributes[e]=t},e.prototype.appendContent=function(e){this.content+=e},e.prototype.appendChild=function(e){this.children.push(e)},e}(),ie=function(){function e(){this.stack=new re}return e.prototype.walkDoc=function(e){if(this.startXMLNode({name:e.nodeName}),e.attributes)for(var t=0;t<e.attributes.length;++t){var n=e.attributes.item(t);this.attributes(n.nodeName,n.nodeValue)}if(e.childNodes)for(var t=0;t<e.childNodes.length;++t){var r=e.childNodes.item(t);r.nodeType===r.TEXT_NODE?this.characters(r.nodeValue):this.walkDoc(r)}this.endXMLNode({name:e.nodeName})},e.prototype.parse=function(e){var t=new DOMParser,n=t.parseFromString(e,"application/xml");this.startDocument(),this.walkDoc(n),this.endDocument()},e.prototype.startDocument=function(){},e.prototype.endDocument=function(){},e.prototype.startXMLNode=function(e){var t=new oe(e);return this.stack.depth()?this.stack.top().appendChild(t):this.root=t,this.stack.push(t)},e.prototype.endXMLNode=function(e){return this.stack.pop()},e.prototype.attributes=function(e,t){this.stack.top().appendAttribute(e,t)},e.prototype.characters=function(e){this.stack.top().appendContent(e)},e}(),ue=function(){function e(e){this.e=e}return e.prototype.fix=function(){delete this.e},e}(),se=function(e){function t(t){var n=e.call(this,t)||this;return n.children=[],n}return y(t,e),t.prototype.append=function(e){this.children.push(e)},t.prototype.fix=function(){this.name=this.e.attributes.name,this.type=this.e.attributes.type;for(var t=this.children.length-1;t>=0;--t){var n=this.children[t];"Row"===n.name&&void 0===n.type&&((r=this.children).push.apply(r,n.children),this.children.splice(t,1))}e.prototype.fix.call(this);var r},t}(ue),ae=function(e){function t(t){return e.call(this,t)||this}return y(t,e),t.prototype.append=function(e){switch(e.name){case"xs:restriction":this._restricition=e;break;case"xs:maxLength":this._maxLength=e}},t.prototype.fix=function(){this.name=this.e.attributes.name,this.type=this._restricition.attributes.base,this.maxLength=+this._maxLength.attributes.value,delete this._restricition,delete this._maxLength,e.prototype.fix.call(this)},t}(ue),ce=function(){function e(){this.simpleTypes={}}return e.prototype.calcWidth=function(e,t){var n=-1;switch(e){case"xs:boolean":n=5;break;case"xs:integer":n=8;break;case"xs:nonNegativeInteger":n=8;break;case"xs:double":n=8;break;case"xs:string":n=32;break;default:for(var r="0123456789",o=e.lastIndexOf("_"),i=o>0?o:e.length,u=i-1;u>=0&&r.indexOf(e.charAt(u))!==-1;--u);u+1<i&&(n=parseInt(e.substring(u+1,i),10)),0===e.indexOf("data")&&(n*=2)}return n<t.length&&(n=t.length),n},e}(),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=new ce,t.simpleTypes={},t.xsdStack=new re,t}return y(t,e),t.prototype.startXMLNode=function(t){var n=e.prototype.startXMLNode.call(this,t);switch(n.name){case"xs:element":var r=new se(n);this.schema.root?this.xsdStack.depth()&&this.xsdStack.top().append(r):this.schema.root=r,this.xsdStack.push(r);break;case"xs:simpleType":this.simpleType=new ae(n)}return n},t.prototype.endXMLNode=function(t){var n=this.stack.top();switch(n.name){case"xs:element":this.xsdStack.pop().fix();break;case"xs:simpleType":this.simpleType.fix(),this.simpleTypes[this.simpleType.name]=this.simpleType,delete this.simpleType;break;default:this.simpleType&&this.simpleType.append(n)}return e.prototype.endXMLNode.call(this,t)},t}(ie),le=function(e){function t(t,n,r){var o=e.call(this,"ESPException:  "+r.Source)||this;return o.isESPExceptions=!0,o.action=t,o.request=n,o.Source=r.Source,o.Exception=r.Exception,o}return y(t,e),t}(Error),fe=function(e){function t(t,n,r){var o=e.call(this,"")||this;return o._transport=t,o._service=n,o._version=r,o}return y(t,e),t.prototype.toESPStringArray=function(e,t){if(C(e[t])){for(var n=0;n<e[t].length;++n)e[t+"_i"+n]=e[t][n];delete e[t]}return e},t.prototype.send=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n="json");var r=$({},t,{ver_:this._version}),o=this.joinUrl(this._service,e+".json");return this._transport.send(o,r,n).then(function(t){if("json"===n){if(t.Exceptions)throw new le(e,r,t.Exceptions);var o=t[("WUCDebug"===e?"WUDebug":e)+"Response"];if(!o)throw new le(e,r,{Source:"ESPConnection.transmit",Exception:[{Code:0,Message:"Missing Response"}]});return o}return t})},t}(B);!function(e){e[e.Unknown=0]="Unknown",e[e.Compiled=1]="Compiled",e[e.Running=2]="Running",e[e.Completed=3]="Completed",e[e.Failed=4]="Failed",e[e.Archived=5]="Archived",e[e.Aborting=6]="Aborting",e[e.Aborted=7]="Aborted",e[e.Blocked=8]="Blocked",e[e.Submitted=9]="Submitted",e[e.Scheduled=10]="Scheduled",e[e.Compiling=11]="Compiling",e[e.Wait=12]="Wait",e[e.UploadingFiled=13]="UploadingFiled",e[e.DebugPaused=14]="DebugPaused",e[e.DebugRunning=15]="DebugRunning",e[e.Paused=16]="Paused",e[e.LAST=17]="LAST",e[e.NotFound=999]="NotFound"}(ne||(ne={})),function(e){e[e.Unknown=0]="Unknown",e[e.Compile=1]="Compile",e[e.Check=2]="Check",e[e.Run=3]="Run",e[e.ExecuteExisting=4]="ExecuteExisting",e[e.Pause=5]="Pause",e[e.PauseNow=6]="PauseNow",e[e.Resume=7]="Resume",e[e.Debug=8]="Debug",e[e.__size=9]="__size"}(e.WUAction||(e.WUAction={}));var he,de=function(){function t(t){"string"==typeof t&&(t=e.createTransport(t)),this._transport=new fe(t,"WsWorkunits","1.67")}return t.prototype.WUQuery=function(e){return void 0===e&&(e={}),this._transport.send("WUQuery",e)},t.prototype.WUInfo=function(e){var t=$({Wuid:"",TruncateEclTo64k:!0,IncludeExceptions:!1,IncludeGraphs:!1,IncludeSourceFiles:!1,IncludeResults:!1,IncludeResultsViewNames:!1,IncludeVariables:!1,IncludeTimers:!1,IncludeDebugValues:!1,IncludeApplicationValues:!1,IncludeWorkflows:!1,IncludeXmlSchemas:!1,IncludeResourceURLs:!1,SuppressResultSchemas:!0},e);return this._transport.send("WUInfo",t)},t.prototype.WUCreate=function(){return this._transport.send("WUCreate")},t.prototype.objToESPArray=function(e,t,n){var r=0;for(var o in t)t.hasOwnProperty(o)&&(n[e+"s."+e+"."+r+".Name"]=o,n[e+"s."+e+"."+r+".Value"]=t[o],++r);n[e+"s."+e+".itemcount"]=r},t.prototype.WUUpdate=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this.objToESPArray("ApplicationValue",t,e),this.objToESPArray("DebugValue",n,e),this._transport.send("WUUpdate",e)},t.prototype.WUSubmit=function(e){return this._transport.send("WUSubmit",e)},t.prototype.WUResubmit=function(e){return this._transport.toESPStringArray(e,"Wuids"),this._transport.send("WUResubmit",e)},t.prototype.WUQueryDetails=function(e){return this._transport.send("WUQueryDetails",e)},t.prototype.WUListQueries=function(e){return this._transport.send("WUListQueries",e)},t.prototype.WUPushEvent=function(e){return this._transport.send("WUPushEvent",e)},t.prototype.WUAction=function(e){return this._transport.toESPStringArray(e,"Wuids"),e.ActionType=e.WUActionType,this._transport.send("WUAction",e)},t.prototype.WUGetZAPInfo=function(e){return this._transport.send("WUGetZAPInfo",e)},t.prototype.WUShowScheduled=function(e){return this._transport.send("WUShowScheduled",e)},t.prototype.WUQuerySetAliasAction=function(e){return this._transport.send("WUQuerySetAliasAction",e)},t.prototype.WUQuerySetQueryAction=function(e){return this._transport.send("WUQuerySetQueryAction",e)},t.prototype.WUPublishWorkunit=function(e){return this._transport.send("WUPublishWorkunit",e)},t.prototype.WUGetGraph=function(e){return this._transport.send("WUGetGraph",e)},t.prototype.WUResult=function(e){return this._transport.send("WUResult",e)},t.prototype.WUQueryGetGraph=function(e){return this._transport.send("WUQueryGetGraph",e)},t.prototype.WUFile=function(e){return this._transport.send("WUFile",e,"text")},t.prototype.WUGetStats=function(e){return this._transport.send("WUGetStats",e)},t.prototype.WUDetails=function(e){return this._transport.send("WUDetails",e)},t.prototype.WUCDebug=function(e){return this._transport.send("WUCDebug",e).then(function(e){var t=w(e.Result);return t.children.length?t.children[0]:null})},t}(),ge=function(){function t(t){"string"==typeof t&&(t=e.createTransport(t)),this._transport=new fe(t,"WsTopology","1.25")}return t.prototype.TpLogicalClusterQuery=function(e){return void 0===e&&(e={}),this._transport.send("WUUpdate",e)},t.prototype.DefaultTpLogicalClusterQuery=function(e){return void 0===e&&(e={}),this.TpLogicalClusterQuery(e).then(function(e){if(e.default)return e.default;var t,n;return e.TpLogicalClusters.TpLogicalCluster.some(function(e,r){return 0===r&&(n=e),"hthor"===e.Type&&(t=e,!0)}),t||n})},t}(),be=function(){function t(t){"string"==typeof t&&(t=e.createTransport(t)),this._transport=new fe(t,"WsSMC","1.19")}return t.prototype.Activity=function(e){return this._transport.send("Activity",e)},t}(),ye=function(){function t(t){"string"==typeof t&&(t=e.createTransport(t)),this._transport=new fe(t,"WsDFU","1.35")}return t}(),me=function(){function e(e,t,n){this.eventTarget=e,this.eventID=t,this.callback=n}return e.prototype.release=function(){this.eventTarget.removeObserver(this.eventID,this.callback)},e.prototype.unwatch=function(){this.release()},e}(),ve=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._eventObservers={},this._knownEvents=e}return e.prototype.addObserver=function(e,t){var n=this._eventObservers[e];return n||(n=[],this._eventObservers[e]=n),n.push(t),new me(this,e,t)},e.prototype.removeObserver=function(e,t){var n=this._eventObservers[e];if(n)for(var r=n.length-1;r>=0;--r)n[r]===t&&n.splice(r,1);return this},e.prototype.dispatchEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this._eventObservers[e];if(r)for(var o=0,i=r;o<i.length;o++){var u=i[o];u.apply(void 0,t)}return this},e.prototype._hasObserver=function(e){var t=this._eventObservers[e];for(var n in t)if(t[n])return!0;return!1},e.prototype.hasObserver=function(e){if(void 0!==e)return this._hasObserver(e);for(var t in this._eventObservers)if(this._hasObserver(t))return!0;return!1},e}(),we=function(){function e(){this._espState={},this._espStateCache={},this._events=new ve}return e.prototype.clear=function(e){this._espState={},this._espStateCache={},void 0!==e&&this.set(e)},e.prototype.get=function(e,t){return void 0===e?this._espState:this.has(e)?this._espState[e]:t},e.prototype.innerXXX=function(e,t){return T(e,this._espState)?R(e,this._espState):t},e.prototype.set=function(e,t,n){return void 0===n&&(n=!1),"string"==typeof e?this.setSingle(e,t,n):this.setAll(e)},e.prototype.setSingle=function(e,t,n){var r=this._espStateCache[e],o=U(t);if(r!==o){this._espStateCache[e]=o;var i=this._espState[e];this._espState[e]=t;var u={id:e,oldValue:i,newValue:t};return n||(this._events.dispatchEvent("propChanged",u),this._events.dispatchEvent("changed",[u])),u}return null},e.prototype.setAll=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=this.setSingle(n,e[n],!0);r&&t.push(r)}if(t.length){for(var o=0,i=t;o<i.length;o++){var u=i[o];this._events.dispatchEvent("propChanged",u)}this._events.dispatchEvent("changed",t)}return t},e.prototype.has=function(e){return void 0!==this._espState[e]},e.prototype.on=function(e,t,n){if(this.isCallback(t))switch(e){case"changed":return this._events.addObserver(e,t)}else switch(e){case"propChanged":
return this._events.addObserver(e,function(e){e.id===t&&n(e)})}return this},e.prototype.isCallback=function(e){return"function"==typeof e},e.prototype.hasEventListener=function(){return this._events.hasObserver()},e}(),_e=function(){function e(e){this._cache={},this._calcID=e}return e.hash=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return U($({},e))},e.prototype.has=function(e){return this._calcID(e)in this._cache},e.prototype.set=function(e){return this._cache[this._calcID(e)]=e,e},e.prototype.get=function(e,t){var n=this._cache[this._calcID(e)];return n?n:this.set(t())},e}();!function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.notice=2]="notice",e[e.warning=3]="warning",e[e.error=4]="error",e[e.critical=5]="critical",e[e.alert=6]="alert",e[e.emergency=7]="emergency"}(he||(he={}));var Ce=function(){function e(){}return e.prototype.log=function(e,t){var n=new Date,r=n.toISOString();console.log(r+" <"+he[e]+">:  "+t)},e.prototype.debug=function(e){this.log(he.debug,e)},e.prototype.info=function(e){this.log(he.info,e)},e.prototype.notice=function(e){this.log(he.notice,e)},e.prototype.warning=function(e){this.log(he.warning,e)},e.prototype.error=function(e){this.log(he.error,e)},e.prototype.critical=function(e){this.log(he.critical,e)},e.prototype.alert=function(e){this.log(he.alert,e)},e.prototype.emergency=function(e){this.log(he.emergency,e)},e}(),Se=new Ce,Pe=function(e){function t(t,n,r,o){var i=e.call(this)||this;i.connection=t instanceof de?t:new de(t);for(var u=0,s=0,a=o;s<a.length;s++){var c=a[s];if(c.GraphName===r.Name&&!c.HasSubGraphId){u=Math.round(1e3*c.Seconds)/1e3;break}}return i.set($({Wuid:n,Time:u},r)),i}return y(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wuid",{get:function(){return this.get("Wuid")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this.get("Name")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Label",{get:function(){return this.get("Label")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.get("Type")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Complete",{get:function(){return this.get("Complete")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WhenStarted",{get:function(){return this.get("WhenStarted")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WhenFinished",{get:function(){return this.get("WhenFinished")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Time",{get:function(){return this.get("Time")},enumerable:!0,configurable:!0}),t}(we),We=function(e){function t(){return e.call(this,function(e){return _e.hash([e.Name])})||this}return y(t,e),t}(_e),Oe=function(){function e(e,t,n){this.parent=e,this.id=t,this.attrs=n}return e.prototype.className=function(){return this.constructor.name},e.prototype.hasECLDefinition=function(){return void 0!==this.attrs.definition},e.prototype.getECLDefinition=function(){var e=/([a-z]:\\(?:[-\w\.\d]+\\)*(?:[-\w\.\d]+)?|(?:\/[\w\.\-]+)+)\((\d*),(\d*)\)/.exec(this.attrs.definition);if(e){var t=e[1],n=e[2],r=e[3];return t.replace("/./","/"),{id:this.id,file:t,line:+n,column:+r}}throw"Bad definition:  "+this.attrs.definition},e}(),je=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.subgraphs=[],o.subgraphsMap={},o.vertices=[],o.verticesMap={},o.edges=[],o.edgesMap={},t&&t.addSubgraph(o),o}return y(t,e),t.prototype.addSubgraph=function(e){if(void 0!==this.subgraphsMap[e.id])throw"Subgraph already exists";this.subgraphsMap[e.id]=e,this.subgraphs.push(e)},t.prototype.addVertex=function(e){if(void 0!==this.verticesMap[e.id])throw"Vertex already exists";this.verticesMap[e.id]=e,this.vertices.push(e)},t.prototype.addEdge=function(e){if(void 0!==this.edgesMap[e.id])throw"Edge already exists";this.edgesMap[e.id]=e,this.edges.push(e)},t.prototype.getNearestDefinition=function(e){if(void 0===e&&(e=!0),this.hasECLDefinition())return this.getECLDefinition();if(e)for(var t=this.vertices.length-1;t>=0;--t){var n=this.vertices[t];if(n.hasECLDefinition())return n.getECLDefinition()}var r;return this.vertices.some(function(e){return!!(r=e.getNearestDefinition())}),r},t}(Oe),Ue=function(e){function t(t,n,r,o){var i=e.call(this,t,n,o)||this;return i.inEdges=[],i.outEdges=[],i.label=r,t.addVertex(i),i}return y(t,e),t.prototype.getNearestDefinition=function(){if(this.hasECLDefinition())return this.getECLDefinition();var e;return this.inEdges.some(function(t){return!!(e=t.getNearestDefinition())}),e},t}(Oe),Re=function(e){function t(t){var n=e.call(this,null,t,{})||this;return n.allSubgraphs={},n.allVertices={},n.allEdges={},n}return y(t,e),t.prototype.breakpointLocations=function(e){var t=[];for(var n in this.allVertices)if(this.allVertices.hasOwnProperty(n)){var r=this.allVertices[n];if(r.hasECLDefinition()){var o=r.getECLDefinition();(o&&!e||e===o.file)&&t.push(o)}}return t.sort(function(e,t){return e.line-t.line})},t}(je),Te=function(e){function t(t,n,r,o,i){var u=e.call(this,t,n,i)||this;return u.sourceID=r,u.targetID=o,t.addEdge(u),u}return y(t,e),t.prototype.getNearestDefinition=function(){return this.hasECLDefinition()?this.getECLDefinition():this.source.getNearestDefinition()},t}(je),De=function(e){function t(t,n,r){var o=e.call(this)||this;o.connection=t instanceof de?t:new de(t);var i=r.split("\\").join("/"),u=i.split("/"),s="res/"+n+"/",a="",c="";return 0===i.indexOf(s)&&(a=i.substr(s.length),c=u[u.length-1]),o.set({Wuid:n,URL:r,DisplayName:c,DisplayPath:a}),o}return y(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wuid",{get:function(){return this.get("Wuid")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"URL",{get:function(){return this.get("URL")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DisplayName",{get:function(){return this.get("DisplayName")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DisplayPath",{get:function(){return this.get("DisplayPath")},enumerable:!0,configurable:!0}),t}(we),Ee=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i.connection=t instanceof de?t:new de(t),i.set($({Wuid:n,ResultViews:o},r)),i}return y(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wuid",{get:function(){return this.get("Wuid")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this.get("Name")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Sequence",{get:function(){return this.get("Sequence")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Value",{get:function(){return this.get("Value")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Link",{get:function(){return this.get("Link")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FileName",{get:function(){return this.get("FileName")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsSupplied",{get:function(){return this.get("IsSupplied")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ShowFileContent",{get:function(){return this.get("ShowFileContent")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Total",{get:function(){return this.get("Total")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ECLSchemas",{get:function(){return this.get("ECLSchemas")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NodeGroup",{get:function(){return this.get("NodeGroup")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ResultViews",{get:function(){return this.get("ResultViews")},enumerable:!0,configurable:!0}),t.prototype.isComplete=function(){return this.Total!==-1},t.prototype.fetchXMLSchema=function(){var e=this;return this.xsdSchema?Promise.resolve(this.xsdSchema):this.WUResult().then(function(t){return T("Result.XmlSchema.xml",t)?(e.xsdSchema=_(t.Result.XmlSchema.xml),e.xsdSchema):e})},t.prototype.fetchResult=function(){return this.WUResult(0,-1,!0).then(function(e){return T("Result.Row",e)?e.Result.Row:[]})},t.prototype.WUResult=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=1),void 0===n&&(n=!1);var r={};return this.Wuid&&void 0!==this.Sequence?(r.Wuid=this.Wuid,r.Sequence=this.Sequence):this.Name&&this.NodeGroup?(r.LogicalName=this.Name,r.Cluster=this.NodeGroup):this.Name&&(r.LogicalName=this.Name),r.Start=e,r.Count=t,r.SuppressXmlSchema=n,this.connection.WUResult(r).then(function(e){return e})},t}(we),ke=function(e){function t(){return e.call(this,function(e){return _e.hash([e.Sequence,e.Name,e.FileName])})||this}return y(t,e),t}(_e),Ae=function(e){function t(t,n,r){var o=e.call(this)||this;return o.connection=t instanceof de?t:new de(t),o.set($({Wuid:n},r)),o}return y(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wuid",{get:function(){return this.get("Wuid")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FileCluster",{get:function(){return this.get("FileCluster")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this.get("Name")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Count",{get:function(){return this.get("Count")},enumerable:!0,configurable:!0}),t}(we),xe=function(e){function t(t,n,r){var o=e.call(this)||this;o.connection=t instanceof de?t:new de(t);var i=A(r.Value);return o.set($({Wuid:n,Seconds:Math.round(1e3*i)/1e3,HasSubGraphId:void 0!==r.SubGraphId,XXX:!0},r)),o}return y(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wuid",{get:function(){return this.get("Wuid")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this.get("Name")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Value",{get:function(){return this.get("Value")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Seconds",{get:function(){return this.get("Seconds")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GraphName",{get:function(){return this.get("GraphName")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SubGraphId",{get:function(){return this.get("SubGraphId")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HasSubGraphId",{get:function(){return this.get("HasSubGraphId")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.get("count")},enumerable:!0,configurable:!0}),t}(we),Le=ne,Ie=function(e){function t(){return e.call(this,function(e){return e.Wuid})||this}return y(t,e),t}(_e),Ne=new Ie,Ve=function(t){function n(e,n,r){var o=t.call(this)||this;return o._debugMode=!1,o._monitorTickCount=0,o._resultCache=new ke,o._graphCache=new We,o.connection=e instanceof de?e:new de(e),o.topologyConnection=n instanceof ge?n:new ge(n||e),o.clearState(r),o}return y(n,t),Object.defineProperty(n.prototype,"properties",{get:function(){return this.get()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Wuid",{get:function(){return this.get("Wuid")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Owner",{get:function(){return this.get("Owner","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Cluster",{get:function(){return this.get("Cluster","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Jobname",{get:function(){return this.get("Jobname","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Description",{get:function(){return this.get("Description","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ActionEx",{get:function(){return this.get("ActionEx","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"StateID",{get:function(){return this.get("StateID",ne.Unknown)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"State",{get:function(){return ne[this.StateID]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Protected",{get:function(){return this.get("Protected",!1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Exceptions",{get:function(){return this.get("Exceptions",{ECLException:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ResultViews",{get:function(){return this.get("ResultViews",[])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ResultCount",{get:function(){return this.get("ResultCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Results",{get:function(){return this.get("Results",{ECLResult:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CResults",{get:function(){var e=this;return this.Results.ECLResult.map(function(t){return e._resultCache.get(t,function(){return new Ee(e.connection,e.Wuid,t,e.ResultViews)})})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SequenceResults",{get:function(){var e={};return this.CResults.forEach(function(t){e[t.Sequence]=t}),e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Timers",{get:function(){return this.get("Timers",{ECLTimer:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CTimers",{get:function(){var e=this;return this.Timers.ECLTimer.map(function(t){return new xe(e.connection,e.Wuid,t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"GraphCount",{get:function(){return this.get("GraphCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Graphs",{get:function(){return this.get("Graphs",{ECLGraph:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CGraphs",{get:function(){var e=this;return this.Graphs.ECLGraph.map(function(t){return e._graphCache.get(t,function(){return new Pe(e.connection,e.Wuid,t,e.CTimers)})})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ThorLogList",{get:function(){return this.get("ThorLogList")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ResourceURLCount",{get:function(){return this.get("ResourceURLCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ResourceURLs",{get:function(){return this.get("ResourceURLs",{URL:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CResourceURLs",{get:function(){var e=this;return this.ResourceURLs.URL.map(function(t){return new De(e.connection,e.Wuid,t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TotalClusterTime",{get:function(){return this.get("TotalClusterTime","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"DateTimeScheduled",{get:function(){return this.get("DateTimeScheduled")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsPausing",{get:function(){return this.get("IsPausing")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ThorLCR",{get:function(){return this.get("ThorLCR")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ApplicationValues",{get:function(){return this.get("ApplicationValues",{ApplicationValue:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HasArchiveQuery",{get:function(){return this.get("HasArchiveQuery")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"StateEx",{get:function(){return this.get("StateEx")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PriorityClass",{get:function(){return this.get("PriorityClass")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PriorityLevel",{get:function(){return this.get("PriorityLevel")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Snapshot",{get:function(){return this.get("Snapshot")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ResultLimit",{get:function(){return this.get("ResultLimit")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"EventSchedule",{get:function(){return this.get("EventSchedule")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HaveSubGraphTimings",{get:function(){return this.get("HaveSubGraphTimings")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Query",{get:function(){return this.get("Query")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HelpersCount",{get:function(){return this.get("HelpersCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Helpers",{get:function(){return this.get("Helpers",{ECLHelpFile:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"DebugValues",{get:function(){return this.get("DebugValues")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"AllowedClusters",{get:function(){return this.get("AllowedClusters")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ErrorCount",{get:function(){return this.get("ErrorCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"WarningCount",{get:function(){return this.get("WarningCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"InfoCount",{get:function(){return this.get("InfoCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"AlertCount",{get:function(){return this.get("AlertCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SourceFileCount",{get:function(){return this.get("SourceFileCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SourceFiles",{get:function(){return this.get("SourceFiles",{ECLSourceFile:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CSourceFiles",{get:function(){var e=this;return this.SourceFiles.ECLSourceFile.map(function(t){return new Ae(e.connection,e.Wuid,t)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"VariableCount",{get:function(){return this.get("VariableCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Variables",{get:function(){return this.get("Variables",{ECLVariable:[]})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TimerCount",{get:function(){return this.get("TimerCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HasDebugValue",{get:function(){return this.get("HasDebugValue")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ApplicationValueCount",{get:function(){return this.get("ApplicationValueCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"XmlParams",{get:function(){return this.get("XmlParams")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"AccessFlag",{get:function(){return this.get("AccessFlag")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ClusterFlag",{get:function(){return this.get("ClusterFlag")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ResultViewCount",{get:function(){return this.get("ResultViewCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"DebugValueCount",{get:function(){return this.get("DebugValueCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"WorkflowCount",{get:function(){return this.get("WorkflowCount",0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Archived",{get:function(){return this.get("Archived")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"DebugState",{get:function(){return this.get("DebugState",{})},enumerable:!0,configurable:!0}),n.create=function(e,t){var r=new n(e,t);return r.connection.WUCreate().then(function(e){return Ne.set(r),r.set(e.Workunit),r})},n.attach=function(e,t,r,o){var i;return e instanceof de&&t instanceof ge?i=Ne.get({Wuid:r},function(){return new n(e,t,r)}):(i=Ne.get({Wuid:t},function(){return new n(e,t)}),o=r),o&&i.set(o),i},n.exists=function(e){return Ne.has({Wuid:e})},n.prototype.clearState=function(e){this.clear({Wuid:e,StateID:Le.Unknown}),this._monitorTickCount=0},n.prototype.update=function(e,t,n){var r=this;return this.connection.WUUpdate($({},e,{Wuid:this.Wuid,StateOrig:this.State,JobnameOrig:this.Jobname,DescriptionOrig:this.Description,ProtectedOrig:this.Protected,ClusterOrig:this.Cluster,ApplicationValues:t,DebugValues:n})).then(function(e){return r.set(e.Workunit),r})},n.prototype.submit=function(t,n,r){var o=this;void 0===n&&(n=e.WUAction.Run);var i;return i=void 0!==t?Promise.resolve(t):this.topologyConnection.DefaultTpLogicalClusterQuery().then(function(e){return e.Name}),this._debugMode=!1,n===e.WUAction.Debug&&(n=e.WUAction.Run,this._debugMode=!0),i.then(function(e){return o.connection.WUUpdate({Wuid:o.Wuid,Action:n,ResultLimit:r},{},{Debug:o._debugMode}).then(function(t){return o.set(t.Workunit),o._submitAction=n,o.connection.WUSubmit({Wuid:o.Wuid,Cluster:e}).then(function(){return o})})})},n.prototype.isComplete=function(){switch(this.StateID){case Le.Compiled:return"compile"===this.ActionEx||this._submitAction===e.WUAction.Compile;case Le.Completed:case Le.Failed:case Le.Aborted:case Le.NotFound:return!0}return!1},n.prototype.isFailed=function(){switch(this.StateID){case Le.Failed:return!0}return!1},n.prototype.isDeleted=function(){switch(this.StateID){case Le.NotFound:return!0}return!1},n.prototype.isDebugging=function(){switch(this.StateID){case Le.DebugPaused:case Le.DebugRunning:return!0}return!1},n.prototype.isRunning=function(){switch(this.StateID){case Le.Compiled:case Le.Running:case Le.Aborting:case Le.Blocked:case Le.DebugPaused:case Le.DebugRunning:return!0}return!1},n.prototype.setToFailed=function(){return this.WUAction("SetToFailed")},n.prototype.pause=function(){return this.WUAction("Pause")},n.prototype.pauseNow=function(){return this.WUAction("PauseNow")},n.prototype.resume=function(){return this.WUAction("Resume")},n.prototype.abort=function(){return this.WUAction("Abort")},n.prototype.delete=function(){return this.WUAction("Delete")},n.prototype.restore=function(){return this.WUAction("Restore")},n.prototype.deschedule=function(){return this.WUAction("Deschedule")},n.prototype.reschedule=function(){return this.WUAction("Reschedule")},n.prototype.refresh=function(e){var t=this;void 0===e&&(e=!1);var n=e?this.WUInfo():this.WUQuery(),r=this.debugStatus();return Promise.all([n,r]).then(function(){return t})},n.prototype.fetchResults=function(){var e=this;return this.WUInfo({IncludeResults:!0}).then(function(){return e.CResults})},n.prototype._monitor=function(){var e=this;if(this._monitorHandle||this.isComplete())return void(this._monitorTickCount=0);this._monitorHandle=setTimeout(function(){(e.hasEventListener()?e.refresh(!0):Promise.resolve(null)).then(function(){e._monitor()}),delete e._monitorHandle},this._monitorTimeoutDuraction())},n.prototype._monitorTimeoutDuraction=function(){return++this._monitorTickCount,this._monitorTickCount<=1?0:this._monitorTickCount<=3?500:this._monitorTickCount<=10?1e3:this._monitorTickCount<=20?3e3:this._monitorTickCount<=30?5e3:1e4},n.prototype.on=function(e,n,r){var o=this;if(this.isCallback(n))switch(e){case"completed":t.prototype.on.call(this,"propChanged","StateID",function(e){o.isComplete()&&n([e])});break;case"changed":t.prototype.on.call(this,e,n)}else switch(e){case"changed":t.prototype.on.call(this,e,n,r)}return this._monitor(),this},n.prototype.watch=function(e,n){var r=this;if(void 0===n&&(n=!0),"function"!=typeof e)throw new Error("Invalid Callback");n&&setTimeout(function(){var t=r.properties,n=[];for(var o in t)t.hasOwnProperty(t)&&n.push({id:o,newValue:t[o],oldValue:void 0});e(n)},0);var o=t.prototype.on.call(this,"changed",e);return this._monitor(),o},n.prototype.watchUntilComplete=function(e){var t=this;return new Promise(function(n,r){var o=t.watch(function(r){e&&e(r),t.isComplete()&&(o.release(),n(t))})})},n.prototype.watchUntilRunning=function(e){var t=this;return new Promise(function(n,r){var o=t.watch(function(r){e&&e(r),(t.isComplete()||t.isRunning())&&(o.release(),n(t))})})},n.prototype.WUQuery=function(e){var t=this;return void 0===e&&(e={}),this.connection.WUQuery($({},e,{Wuid:this.Wuid})).then(function(e){return t.set(e.Workunits.ECLWorkunit[0]),e}).catch(function(e){if(!e.Exception.some(function(e){return 20081===e.Code&&(t.clearState(t.Wuid),t.set("StateID",Le.NotFound),!0)}))throw Se.warning("Unexpected exception:  "),e;return{}})},n.prototype.WUCreate=function(){var e=this;return this.connection.WUCreate().then(function(t){return e.set(t.Workunit),Ne.set(e),t})},n.prototype.WUInfo=function(e){var t=this;void 0===e&&(e={});var n=e.IncludeResults||e.IncludeResultsViewNames;return this.connection.WUInfo($({},e,{Wuid:this.Wuid,IncludeResults:n,IncludeResultsViewNames:n,SuppressResultSchemas:!1})).then(function(e){return e.Workunit.ResourceURLCount&&(e.Workunit.ResourceURLCount=e.Workunit.ResourceURLCount-1),e.Workunit.ResourceURLs&&e.Workunit.ResourceURLs.URL&&(e.Workunit.ResourceURLs.URL=e.Workunit.ResourceURLs.URL.filter(function(e,t){return t>0})),t.set(e.Workunit),t.set({ResultViews:n?e.ResultViews:[],HelpersCount:e.Workunit.Helpers&&e.Workunit.Helpers.ECLHelpFile?e.Workunit.Helpers.ECLHelpFile.length:0}),e}).catch(function(e){if(!e.Exception.some(function(e){return 20080===e.Code&&(t.clearState(t.Wuid),t.set("StateID",Le.NotFound),!0)}))throw Se.warning("Unexpected exception:  "),e;return{}})},n.prototype.WUAction=function(e){var t=this;return this.connection.WUAction({Wuids:[this.Wuid],WUActionType:e}).then(function(e){return t.refresh().then(function(){return t._monitor(),e})})},n.prototype.WUResubmit=function(e,t){var n=this;return this.connection.WUResubmit({Wuids:[this.Wuid],CloneWorkunit:e,ResetWorkflow:t}).then(function(e){return n.clearState(n.Wuid),n.refresh().then(function(){return n._monitor(),e})})},n.prototype.WUCDebug=function(e,t){void 0===t&&(t={});var n="";for(var r in t)t.hasOwnProperty(r)&&(n+=" "+r+"='"+t[r]+"'");return this.connection.WUCDebug({Wuid:this.Wuid,Command:"<debug:"+e+" uid='"+this.Wuid+"'"+n+"/>"}).then(function(e){return e})},n.prototype.debug=function(e,t){return this.isDebugging()?this.WUCDebug(e,t).then(function(t){return t.children.filter(function(t){return t.name===e})[0]}).catch(function(e){return Promise.resolve(null)}):Promise.resolve(null)},n.prototype.debugStatus=function(){var e=this;return this.isDebugging()?this.debug("status").then(function(t){t=t||new oe("null");var n=$({},e.DebugState,t.attributes);return e.set({DebugState:n}),t}):Promise.resolve({DebugState:{state:"unknown"}})},n.prototype.debugContinue=function(e){return void 0===e&&(e=""),this.debug("continue",{mode:e})},n.prototype.debugStep=function(e){return this.debug("step",{mode:e})},n.prototype.debugPause=function(){return this.debug("interrupt")},n.prototype.debugQuit=function(){return this.debug("quit")},n.prototype.debugDeleteAllBreakpoints=function(){return this.debug("delete",{idx:0})},n.prototype.debugBreakpointResponseParser=function(e){return e.children.map(function(e){if("break"===e.name)return e.attributes})},n.prototype.debugBreakpointAdd=function(e,t,n){var r=this;return this.debug("breakpoint",{id:e,mode:t,action:n}).then(function(e){return r.debugBreakpointResponseParser(e)})},n.prototype.debugBreakpointList=function(){var e=this;return this.debug("list").then(function(t){return e.debugBreakpointResponseParser(t)})},n.prototype.debugGraph=function(){var e=this;return this._debugAllGraph&&this.DebugState._prevGraphSequenceNum===this.DebugState.graphSequenceNum?Promise.resolve(this._debugAllGraph):this.debug("graph",{name:"all"}).then(function(t){return e.DebugState._prevGraphSequenceNum=e.DebugState.graphSequenceNum,e._debugAllGraph=k(e.Wuid,t),e._debugAllGraph})},n.prototype.debugBreakpointValid=function(e){return this.debugGraph().then(function(t){return t.breakpointLocations(e)})},n.prototype.debugPrint=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=10),this.debug("print",{edgeID:e,startRow:t,numRows:n}).then(function(e){return e.children.map(function(e){var t={};return e.children.forEach(function(e){t[e.name]=e.content}),t})})},n}(we);!function(e){Y=e}(V),e.commsMsg="Hello and Welcome no xmldom",e.JSONPTransport=te,e.XHRGetTransport=K,e.XHRPostTransport=ee,e.setTransportFactory=v,e.WsWorkunits=de,e.WsTopology=ge,e.WsSMC=be,e.WsDFU=ye,e.Workunit=Ve,e.Result=Ee,e.SourceFile=Ae,e.Resource=De,e.Timer=xe,e.XGMMLGraph=Re,e.GraphItem=Oe,e.espTime2Seconds=A,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=comms-browser.min.js.map
